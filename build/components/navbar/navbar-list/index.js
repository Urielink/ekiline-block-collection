(()=>{"use strict";var e,t={5156:()=>{const e=window.wp.blocks,t=window.wp.i18n,n=window.wp.blockEditor,l=window.wp.components,a=window.wp.data,r=window.ReactJSXRuntime,o=e=>{const t=e?.attributes?.content||"",{label:n,url:l}=(e=>{if(!e)return{label:"",url:""};const t=document.createElement("div");t.innerHTML=e;const n=t.querySelector("a");return n?{label:n.textContent.trim(),url:n.getAttribute("href")||""}:{label:t.textContent.trim(),url:""}})(t),{href:a,aClass:r,aStyle:i,inner:s}=(e=>{const t=document.createElement("div");t.innerHTML=e||"";const n=t.querySelector("a");return n?{href:n.getAttribute("href")||"",aClass:n.getAttribute("class")||"",aStyle:n.getAttribute("style")||"",inner:n.innerHTML||""}:{href:"",aClass:"",aStyle:"",inner:""}})(t),c=l||a?"link":"text",d=e?.attributes?.className||"",m=e?.attributes?.style||null,v=(e?.innerBlocks||[]).find(e=>"core/list"===e.name),h=v?(v.innerBlocks||[]).filter(e=>"core/list-item"===e.name).map(o):[],p={type:c,label:n,url:l||a||"",raw:t,liClass:d,liStyle:m,aClass:r,aStyle:i,labelHtml:s,textColorSlug:e?.attributes?.textColor||"",fontSizeSlug:e?.attributes?.fontSize||"",linkColorSlug:(e=>{if(!e||"string"!=typeof e)return"";const t=e.match(/var:preset\|(?:color|font-size)\|([^|\s]+)/);return t?t[1]:""})(m?.elements?.link?.color?.text||"")||""};return h.length&&(p.children=h),p},i=[["core/list",{},[["core/list-item",{content:"Home"}],["core/list-item",{content:"Features"}],["core/list-item",{content:"Pricing"}],["core/list-item",{content:"Dropdown link"},[["core/list",{},[["core/list-item",{content:"Action"}],["core/list-item",{content:"Another action"}],["core/list-item",{content:"Something else here"}]]]]]]]],s=["core/list"],c=window.wp.element,d=(...e)=>{const t=new Set;return e.filter(Boolean).join(" ").split(/\s+/).forEach(e=>e&&t.add(e)),Array.from(t).join(" ")},m=(e=[],t=0)=>{const n=0===t,l=n?"navbar-nav":"dropdown-menu";return(0,r.jsx)("ul",{className:l,children:e.map((e,l)=>{const a=Array.isArray(e.children)&&e.children.length>0,o="text"===e.type&&!a,i=n?a?"nav-item dropdown":o?"":"nav-item":a?"dropdown-submenu dropend":"",s=d(e.textColorSlug?`has-${e.textColorSlug}-color has-text-color`:"",e.fontSizeSlug?`has-${e.fontSizeSlug}-font-size`:"",e.linkColorSlug?"has-link-color":""),v=d(i,e.liClass,s),h=d(n?a?"nav-link dropdown-toggle":"nav-link":a?"dropdown-item dropdown-toggle":"dropdown-item",e.aClass),p=(e=>{if(!e)return;const t={};return e.typography&&(e.typography.fontSize&&(t.fontSize=e.typography.fontSize),e.typography.fontStyle&&(t.fontStyle=e.typography.fontStyle),e.typography.fontWeight&&(t.fontWeight=e.typography.fontWeight),e.typography.textDecoration&&(t.textDecoration=e.typography.textDecoration),e.typography.letterSpacing&&(t.letterSpacing=e.typography.letterSpacing),e.typography.lineHeight&&(t.lineHeight=e.typography.lineHeight)),e.color&&(e.color.text&&(t.color=e.color.text),e.color.background&&(t.backgroundColor=e.color.background)),Object.keys(t).length?t:void 0})(e.liStyle),u=(e=>{if(e)return e.split(";").reduce((e,t)=>{const[n,l]=t.split(":").map(e=>e&&e.trim()).filter(Boolean);return n&&l?(e[n.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())]=l,e):e},{})})(e.aStyle);if(o)return n?(0,r.jsx)("li",{className:v,style:p,children:(0,r.jsx)("span",{className:"navbar-text",children:e.raw?(0,r.jsx)(c.RawHTML,{children:e.raw}):e.label||""})},l):(0,r.jsx)("li",{className:v,style:p,children:(0,r.jsx)("span",{className:"dropdown-item-text",children:e.raw?(0,r.jsx)(c.RawHTML,{children:e.raw}):e.label||""})},l);const g={className:h,href:e.url||"#"};return a&&(g["data-bs-toggle"]="dropdown",g.role="button",g["aria-expanded"]="false"),(0,r.jsxs)("li",{className:v,style:p,children:[(0,r.jsx)("a",{...g,style:u,children:e.labelHtml?(0,r.jsx)(c.RawHTML,{children:e.labelHtml}):e.label||""}),a?m(e.children,t+1):null]},l)})})},v=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"ekiline-block-collection/navbar-list","version":"0.1.0","textdomain":"ekiline-block-collection","title":"Ekiline Navbar (por lista)","category":"design","icon":"menu","description":"Navbar Bootstrap generado a partir de un bloque Lista.","example":{},"supports":{"anchor":true,"html":false,"spacing":{"margin":true,"padding":true}},"attributes":{"menuHtml":{"type":"string","default":""},"menuJson":{"type":"string","default":"[]"},"isEditingMenu":{"type":"boolean","default":true},"navStyle":{"type":"string","default":"collapse"},"navShow":{"type":"string","default":" navbar-expand-lg"},"navPosition":{"type":"string","default":""},"alignItems":{"type":"string","default":""},"container":{"type":"string","default":"container-fluid"},"brandText":{"type":"string","default":"Navbar"},"targetId":{"type":"string","default":"navbarNavDropdown"}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":"file:./view.js"}'),h=Object.fromEntries([{name:"collectionIcon",d:"M18,0H2C0.9,0,0,0.9,0,2v16c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V2C20,0.9,19.1,0,18,0z M16,10.69H8.27V8.66h5.7l0-0.79l-2.25-2.23l-5.7-0.02l-0.01,6.5l2.25,2.23l5.7,0.02l0-1.68H16v3.71l-8.57-0.04L4,12.97V3.59l8.57,0.04L16,7.03V10.69z"},{name:"accordionIcon",d:"M1,1V6.04H19V1H1ZM18.1,5.14H1.9V1.9H18.1v3.24Zm-2.8,12.51l1.44-1.17-1.44-1.17v2.34Zm-14.3,1.35H19v-5.04H1v5.04Zm.9-4.14H18.1v3.24H1.9v-3.24Zm-.9-2.34H19V7.48H1v5.04Zm16.19-3.24l-1.17,1.44-1.17-1.44h2.34Zm-1.89-6.93v2.34l1.44-1.17-1.44-1.17Z"},{name:"carouselIcon",d:"M10.51,15.06c.28-.28,.28-.74,0-1.02-.28-.28-.74-.28-1.02,0-.28,.28-.28,.74,0,1.02,.28,.28,.74,.28,1.02,0Zm1.93,0c.28-.28,.28-.74,0-1.02-.28-.28-.74-.28-1.02,0-.28,.28-.28,.74,0,1.02,.28,.28,.74,.28,1.02,0Zm2.96-6.23v2.34l1.44-1.17-1.44-1.17ZM1,2.8v14.4H19V2.8H1Zm16.92,13.32H2.08V3.88h15.84v12.24Zm-9.34-1.06c.28-.28,.28-.74,0-1.02-.28-.28-.74-.28-1.02,0-.28,.28-.28,.74,0,1.02,.28,.28,.74,.28,1.02,0Zm-3.98-6.23l-1.44,1.17,1.44,1.17v-2.34Z"},{name:"collapseIcon",d:"M15.55,11.31h-1.74v1.08h1.74v-1.08Zm-3.12,0h-1.74v1.08h1.74v-1.08ZM1,1V19H19V1H1Zm16.19,1.8l-1.17,1.44-1.17-1.44h2.34Zm.73,8.51h-.98v1.08h.98v5.53H2.08v-5.53h.97v-1.08h-.97V6.04h15.84v5.27Zm-11.74,0h-1.74v1.08h1.74v-1.08Zm3.12,0h-1.74v1.08h1.74v-1.08Z"},{name:"modalIcon",d:"M15.32,5.14l.64-.64,.64,.64,.76-.76-.64-.64,.63-.63-.76-.76-.63,.63-.63-.63-.76,.76,.63,.63-.64,.64,.76,.76Zm2.78-4.14H1.9c-.5,0-.9,.4-.9,.9V18.1c0,.5,.4,.9,.9,.9H18.1c.5,0,.9-.4,.9-.9V1.9c0-.5-.4-.9-.9-.9Zm-.18,16.92H2.08v-3.36h15.84v3.36Zm0-4.44H2.08V6.52h15.84v6.97Zm0-8.05H2.08V2.08h15.84v3.36Z"},{name:"navigationIcon",d:"M12.16,5.26l-.76-.76-3.56,3.56,.76,.76,3.56-3.56Zm-2.99,.57c.28-.28,.28-.74,0-1.02s-.74-.28-1.02,0c-.28,.28-.28,.74,0,1.02,.28,.28,.74,.28,1.02,0Zm1.65,1.65c-.28,.28-.28,.74,0,1.02s.74,.28,1.02,0c.28-.28,.28-.74,0-1.02-.28-.28-.74-.28-1.02,0Zm3.46,3.13H1v5.04H19v-5.04h-4.72Zm-7.16,4.14h-1.08v-3.24h1.08v3.24Zm2.47,0h-1.15v-3.24h1.15v3.24Zm3.38,0h-2.07v-3.24h2.07v3.24Zm5.13,0h-3.82v-3.24h3.82v3.24Z"},{name:"offcanvasIcon",d:"M9.46,12.43h1.08v-1.74h-1.08v1.74Zm0,3.12h1.08v-1.74h-1.08v1.74Zm0-6.25h1.08v-1.74h-1.08v1.74ZM13.42,1H1V19H19V1h-5.58Zm0,16.92h-2.88v-.98h-1.08v.98H2.08V2.08h7.38v.97h1.08v-.97h2.88v15.84Zm3.51-6.76l-1.44-1.17,1.44-1.17v2.34Zm-7.47-4.98h1.08v-1.74h-1.08v1.74Z"},{name:"popoverIcon",d:"M10.57,13.14l1.15-2.18h5.48c.99,0,1.8-.81,1.8-1.8V1.78c0-.99-.81-1.8-1.8-1.8H2.8c-.99,0-1.8,.81-1.8,1.8v7.38c0,.99,.81,1.8,1.8,1.8h5.48l1.15,2.18H1v4.88H19v-4.88H10.57Zm-1.33-2.68l-.3-.57H2.8c-.4,0-.72-.32-.72-.72V1.78c0-.4,.32-.72,.72-.72h14.4c.4,0,.72,.32,.72,.72v7.38c0,.4-.32,.72-.72,.72h-6.13l-.3,.57-.77,1.45-.77-1.45Z"},{name:"progressIcon",d:"M12.16,5.26l-.76-.76-3.56,3.56,.76,.76,3.56-3.56Zm-2.99,.57c.28-.28,.28-.74,0-1.02s-.74-.28-1.02,0c-.28,.28-.28,.74,0,1.02,.28,.28,.74,.28,1.02,0Zm1.65,1.65c-.28,.28-.28,.74,0,1.02s.74,.28,1.02,0c.28-.28,.28-.74,0-1.02-.28-.28-.74-.28-1.02,0Zm3.46,3.13H1v5.04H19v-5.04h-4.72Zm-7.16,4.14h-1.08v-3.24h1.08v3.24Zm2.47,0h-1.15v-3.24h1.15v3.24Zm3.38,0h-2.07v-3.24h2.07v3.24Zm5.13,0h-3.82v-3.24h3.82v3.24Z"},{name:"tabsIcon",d:"M10,1H1V19H19V1H10Zm-3.33,1.8l-1.17,1.44-1.17-1.44h2.34Zm11.25,15.12H2.08V6.04h15.84v11.88Zm0-13.23h-7.92V2.08h7.92v2.61Z"},{name:"toastIcon",d:"M5.35,3.63l-2.03,.3,.84,5.66,2.03-.3-.84-5.66Zm.73,6.69c-.48-.36-1.16-.26-1.51,.22s-.26,1.16,.22,1.51c.48,.36,1.16,.26,1.51-.22s.26-1.16-.22-1.51Zm12.93-1.1h-5.4V1H1V19H13.6v-2.22h5.4v-7.56Zm-6.48,8.7H2.08V2.08H12.52v7.14h-2.88c-.99,0-1.8,.81-1.8,1.8v3.96c0,.99,.81,1.8,1.8,1.8h2.88v1.14Zm-2.88-2.22c-.4,0-.72-.32-.72-.72v-3.96c0-.4,.32-.72,.72-.72h8.28v5.4H9.64Zm7.86-4.37l-.76-.76-.63,.63-.63-.63-.76,.76,.63,.63-.64,.64,.76,.76,.64-.64,.64,.64,.76-.76-.64-.64,.63-.63Z"}].map(({name:e,d:t})=>[e,(0,c.createElement)("svg",{width:20,height:20},(0,c.createElement)("path",{d:t}))])),{collectionIcon:p,navigationIcon:u}=h;var g;g=p,(0,e.registerBlockCollection)("ekiline-block-collection",{title:"Ekiline Block Collection",icon:g}),(0,e.registerBlockType)(v.name,{...v,icon:u,edit:function({attributes:c,setAttributes:d,clientId:m}){const{menuHtml:v,menuJson:h,isEditingMenu:p,navStyle:u,navShow:g,navPosition:b,alignItems:f,container:y,brandText:x,targetId:k}=c,H=(0,n.useBlockProps)(),{getBlocks:S}=(0,a.useSelect)(e=>{const t=e(n.store);return{getBlocks:()=>t.getBlocks(m)}},[m]),{replaceInnerBlocks:Z}=(0,a.useDispatch)(n.store),w=()=>{const t=S(),n=t.find(e=>"core/list"===e.name);let l=[];if(n)l=(e=>e?(e.innerBlocks||[]).filter(e=>"core/list-item"===e.name).map(o):[])(n);else{const n=(0,e.serialize)(t).match(/<ul[\s\S]*<\/ul>/),r=n&&(a=n[0])?a.replace(/<!--\s*\/?wp:[\s\S]*?-->/g,"").trim():"";if(r){const e=document.createElement("div");e.innerHTML=r,l=Array.from(e.querySelectorAll(":scope > ul > li")).map(e=>{const t=e.querySelector("a"),n=t?t.textContent.trim():e.textContent.trim(),l=t&&t.getAttribute("href")||"",a=Array.from(e.querySelectorAll(":scope > ul > li")).map(e=>{const t=e.querySelector("a");return{label:t?t.textContent.trim():e.textContent.trim(),url:t&&t.getAttribute("href")||""}}),r={label:n,url:l};return a.length&&(r.children=a),r})}}var a;const r=(e=[],t=0)=>{const n=0===t?"navbar-nav":"";return`<ul${n?` class="${n}"`:""}>${e.map(e=>{const n=e.label||"";return`<li>${e.url?`<a href="${e.url}">${n}</a>`:n}${e.children&&e.children.length?r(e.children,t+1):""}</li>`}).join("")}</ul>`},i=r(l);d({menuJson:JSON.stringify(l),menuHtml:i,isEditingMenu:!1}),Z(m,[],!1)};return(0,r.jsxs)("div",{...H,children:[(0,r.jsx)(n.BlockControls,{group:"block",controls:[{icon:"edit",title:(0,t.__)("Editar navegación","ekiline"),onClick:()=>{d({isEditingMenu:!0});try{const t=((e=[])=>{const t=e=>["core/list-item",{content:e.url?`<a href="${e.url}">${e.label||""}</a>`:e.label||""},e.children&&e.children.length?[["core/list",{},e.children.map(t)]]:[]];return[["core/list",{},e.map(t)]]})(JSON.parse(c.menuJson||"[]")),n=(0,e.createBlocksFromInnerBlocksTemplate)(t);Z(m,n,!1)}catch(e){}},isDisabled:p},{icon:"yes",title:(0,t.__)("Guardar menú","ekiline"),onClick:w,isDisabled:!p}]}),(0,r.jsxs)(n.InspectorControls,{children:[(0,r.jsxs)(l.PanelBody,{title:(0,t.__)("Comportamiento","ekiline"),initialOpen:!0,children:[(0,r.jsx)(l.SelectControl,{label:"Estilo",value:u,options:[{label:"Colapsable",value:"collapse"},{label:"Offcanvas",value:"offcanvas"}],onChange:e=>d({navStyle:e})}),(0,r.jsx)(l.SelectControl,{label:"Breakpoint",value:g,options:[{label:"Expand LG",value:" navbar-expand-lg"},{label:"Expand MD",value:" navbar-expand-md"},{label:"Expand SM",value:" navbar-expand-sm"},{label:"Siempre colapsado",value:""}],onChange:e=>d({navShow:e})}),(0,r.jsx)(l.SelectControl,{label:(0,t.__)("Align nav items","ekiline-block-collection"),value:f,options:[{label:(0,t.__)("Default","ekiline-block-collection"),value:""},{label:(0,t.__)("Center","ekiline-block-collection"),value:" justify-content-md-center"}],onChange:e=>d({alignItems:e})}),(0,r.jsx)(l.SelectControl,{label:"Posición",value:b,options:[{label:"Normal",value:""},{label:"Fija arriba",value:" fixed-top"},{label:"Fija abajo",value:" fixed-bottom"},{label:"Sticky top",value:" sticky-top"}],onChange:e=>d({navPosition:e})}),(0,r.jsx)(l.SelectControl,{label:"Container",value:y,options:[{label:"container-fluid",value:"container-fluid"},{label:"container",value:"container"},{label:"sin contenedor",value:""}],onChange:e=>d({container:e})}),(0,r.jsx)(l.TextControl,{label:"Texto de marca",value:x,onChange:e=>d({brandText:e})}),(0,r.jsx)(l.TextControl,{label:"ID del target (collapse/offcanvas)",value:k,onChange:e=>d({targetId:e}),help:"Debe ser único en la página."})]}),(0,r.jsx)(l.PanelBody,{title:(0,t.__)("Estado","ekiline"),initialOpen:!1,children:(0,r.jsx)(l.Notice,{status:"info",isDismissible:!1,children:p?"Modo edición: usa el bloque Lista para armar el menú y presiona “Guardar menú”.":"Modo preview: así se verá tu navegación. Usa la barra para editar de nuevo."})})]}),p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"1)"})," Crea/edita tu menú con ",(0,r.jsx)("em",{children:"Lista"}),". Puedes anidar sublistas para dropdowns."]}),(0,r.jsx)("hr",{className:"wp-block-separator"}),(0,r.jsx)(n.InnerBlocks,{allowedBlocks:s,templateLock:!1,template:i,renderAppender:n.InnerBlocks.ButtonBlockAppender}),(0,r.jsx)("hr",{className:"wp-block-separator"}),(0,r.jsx)(l.Button,{variant:"primary",onClick:w,children:"Guardar menú"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{style:{opacity:.7,marginBottom:"8px"},children:"Vista previa (usa la barra superior para “Editar navegación”)."}),(0,r.jsx)("div",{style:{border:"1px dashed #ccc",padding:"8px",borderRadius:"8px",maxHeight:220,overflow:"auto"},children:(0,r.jsx)("pre",{style:{whiteSpace:"pre-wrap",margin:0},children:h&&"[]"!==h?h:"(sin menú)"})})]})]})},save:function({attributes:e}){const{menuHtml:t,menuJson:n,navStyle:l,navShow:a,navPosition:o,alignItems:i,container:s,brandText:d,targetId:v}=e,h=`navbar${o||""}${a||""}${i||""} bg-body-tertiary`.trim(),p=s||"container-fluid",u="offcanvas"===l?"offcanvas offcanvas-end":"collapse navbar-collapse";return(0,r.jsx)("nav",{className:h,children:(0,r.jsxs)("div",{className:p,children:[(0,r.jsx)("div",{className:"navbar-brand",children:d||"Navbar"}),(0,r.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"offcanvas"===l?"offcanvas":"collapse","data-bs-target":`#${v}`,"aria-controls":v,"aria-expanded":"false","aria-label":"Toggle navigation",children:(0,r.jsx)("span",{className:"navbar-toggler-icon"})}),(0,r.jsx)("div",{id:v,className:u,children:n&&"[]"!==n?m(JSON.parse(n),0):t?(0,r.jsx)(c.RawHTML,{children:t}):(0,r.jsx)("ul",{className:"navbar-nav"})})]})})}})}},n={};function l(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,l),r.exports}l.m=t,e=[],l.O=(t,n,a,r)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,a,r]=e[d],i=!0,s=0;s<n.length;s++)(!1&r||o>=r)&&Object.keys(l.O).every(e=>l.O[e](n[s]))?n.splice(s--,1):(i=!1,r<o&&(o=r));if(i){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,a,r]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={311:0,3999:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[o,i,s]=n,c=0;if(o.some(t=>0!==e[t])){for(a in i)l.o(i,a)&&(l.m[a]=i[a]);if(s)var d=s(l)}for(t&&t(n);c<o.length;c++)r=o[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(d)},n=globalThis.webpackChunkekiline_block_collection=globalThis.webpackChunkekiline_block_collection||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=l.O(void 0,[3999],()=>l(5156));a=l.O(a)})();