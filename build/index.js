(()=>{"use strict";const e=window.wp.i18n,t=window.wp.components,o=window.wp.hooks,l=window.wp.element,n=window.wp.blockEditor,i=window.wp.compose,r=window.ReactJSXRuntime,s=["core/button","core/buttons"],a=(0,i.createHigherOrderComponent)(o=>i=>{const{attributes:a,setAttributes:c}=i,{dismissBsComponent:d}=a;return s.includes(i.name)?(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(o,{...i}),i.attributes.url&&(0,r.jsx)(n.InspectorControls,{children:(0,r.jsxs)(t.PanelBody,{title:(0,e.__)("Link to Block (Ekiline)","ekiline-block-collection"),initialOpen:!0,children:[(0,r.jsx)(t.TextControl,{label:(0,e.__)("Anchor block name","ekiline-block-collection"),value:i.attributes.anchorBsComponent,onChange:e=>i.setAttributes({anchorBsComponent:e})}),(0,r.jsx)(t.SelectControl,{label:(0,e.__)("Choose block","ekiline-block-collection"),value:a.selectBsComponent,options:[{label:(0,e.__)("None","ekiline-block-collection"),value:""},{label:(0,e.__)("Collapse","ekiline-block-collection"),value:"collapse"},{label:(0,e.__)("Modal","ekiline-block-collection"),value:"modal"},{label:(0,e.__)("Offcanvas","ekiline-block-collection"),value:"offcanvas"}],onChange:e=>c({selectBsComponent:e})}),(0,r.jsx)(t.ToggleControl,{label:(0,e.__)("Is close button?","ekiline-block-collection"),checked:!d,onChange:()=>c({dismissBsComponent:!d}),help:d?(0,e.__)("No.","ekiline-block-collection"):(0,e.__)("Yes.","ekiline-block-collection")})]})})]}):(0,r.jsx)(o,{...i})},"withAdvancedControlsBsButtonLink");(0,o.addFilter)("blocks.registerBlockType","ekilineBsButtonLinkData/dataAttribute",function(e){return s.includes(e.name)&&(e.attributes=Object.assign(e.attributes,{anchorBsComponent:{type:"string",default:""},selectBsComponent:{type:"string",default:""},dismissBsComponent:{type:"boolean",default:!0}})),e}),(0,o.addFilter)("editor.BlockEdit","ekilineBsButtonLinkData/dataInput",a),(0,o.addFilter)("blocks.getSaveElement","ekilineBsButtonLinkData/dataModified",function(e,t,o){const{dismissBsComponent:n}=o;if(s.includes(t.name)){if(n&&o.anchorBsComponent&&o.selectBsComponent&&o.url)return(0,l.cloneElement)(e,{},(0,l.cloneElement)(e.props.children,{"data-bs-target":o.anchorBsComponent,"data-bs-toggle":o.selectBsComponent}));if(!n&&o.anchorBsComponent&&o.selectBsComponent&&o.url)return(0,l.cloneElement)(e,{},(0,l.cloneElement)(e.props.children,{"data-bs-dismiss":o.selectBsComponent}))}return e});const c=(0,i.createHigherOrderComponent)(e=>t=>{const{name:o,attributes:l,className:n}=t;if(s.includes(o)&&l.addDataLnkPopover&&l.url){const o="has-ekiline-popover-preview",l=n?`${n} ${o}`:o;return(0,r.jsx)(e,{...t,className:l})}return(0,r.jsx)(e,{...t})},"withButtonPopoverPreview");(0,o.addFilter)("editor.BlockListBlock","ekilineBsButtonLinkData/editorPreview",c);const d=["core/image"],u=(0,i.createHigherOrderComponent)(o=>i=>{const{attributes:s,setAttributes:a}=i,{dismissBsComponent:c}=s;return d.includes(i.name)?(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(o,{...i}),i.attributes.href&&(0,r.jsx)(n.InspectorControls,{children:(0,r.jsxs)(t.PanelBody,{title:(0,e.__)("Link to Ekiline Block","ekiline-block-collection"),initialOpen:!0,children:[(0,r.jsx)(t.TextControl,{label:(0,e.__)("Anchor block name","ekiline-block-collection"),value:i.attributes.anchorBsComponent,onChange:e=>i.setAttributes({anchorBsComponent:e})}),(0,r.jsx)(t.SelectControl,{label:(0,e.__)("Choose block","ekiline-block-collection"),value:s.selectBsComponent,options:[{label:(0,e.__)("None","ekiline-block-collection"),value:""},{label:(0,e.__)("Collapse","ekiline-block-collection"),value:"collapse"},{label:(0,e.__)("Modal","ekiline-block-collection"),value:"modal"},{label:(0,e.__)("Offcanvas","ekiline-block-collection"),value:"offcanvas"}],onChange:e=>a({selectBsComponent:e})}),(0,r.jsx)(t.ToggleControl,{label:(0,e.__)("Is close button?","ekiline-block-collection"),checked:!c,onChange:()=>a({dismissBsComponent:!c}),help:c?(0,e.__)("No.","ekiline-block-collection"):(0,e.__)("Yes.","ekiline-block-collection")})]})})]}):(0,r.jsx)(o,{...i})},"withAdvancedControlsBsImageLink");(0,o.addFilter)("blocks.registerBlockType","ekilineBsImageLinkData/dataAttribute",function(e){return d.includes(e.name)&&(e.attributes=Object.assign(e.attributes,{anchorBsComponent:{type:"string",default:""},selectBsComponent:{type:"string",default:""},dismissBsComponent:{type:"boolean",default:!0}})),e}),(0,o.addFilter)("editor.BlockEdit","ekilineBsImageLinkData/dataInput",u),(0,o.addFilter)("blocks.getSaveElement","ekilineBsImageLinkData/dataModified",function(e,t,o){const{dismissBsComponent:n}=o;if(d.includes(t.name)){const t=o.anchorBsComponent,i=o.selectBsComponent,r=o.href,s=e?.props?.children?.props?.children?.[0];if("a"===s?.type){if(n&&t&&i&&r)return(0,l.cloneElement)(e,{},(0,l.cloneElement)(s,{"data-bs-target":t,"data-bs-toggle":i}));if(!n&&t&&i&&r)return(0,l.cloneElement)(e,{},(0,l.cloneElement)(s,{"data-bs-dismiss":i}))}}return e});const b=["core/button","core/buttons"],k=(0,i.createHigherOrderComponent)(o=>i=>b.includes(i.name)?(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(o,{...i}),i.attributes.url&&(0,r.jsx)(n.InspectorControls,{children:(0,r.jsxs)(t.PanelBody,{title:(0,e.__)("Button to Popover (Ekiline)","ekiline-block-collection"),initialOpen:!0,children:[(0,r.jsx)(t.TextControl,{label:(0,e.__)("Popover text to show.","ekiline-block-collection"),value:i.attributes.addDataLnkPopover,onChange:e=>i.setAttributes({addDataLnkPopover:e})}),(0,r.jsx)(t.SelectControl,{label:(0,e.__)("Popover position","ekiline-block-collection"),value:i.attributes.addPositionLnkPopover,options:[{label:(0,e.__)("Auto","ekiline-block-collection"),value:"auto"},{label:(0,e.__)("Top","ekiline-block-collection"),value:"top"},{label:(0,e.__)("Right","ekiline-block-collection"),value:"right"},{label:(0,e.__)("Bottom","ekiline-block-collection"),value:"bottom"},{label:(0,e.__)("Left","ekiline-block-collection"),value:"left"}],onChange:e=>i.setAttributes({addPositionLnkPopover:e})}),(0,r.jsx)(t.ToggleControl,{label:(0,e.__)("Is tooltip","ekiline-block-collection"),checked:i.attributes.defineTooltip,onChange:e=>i.setAttributes({defineTooltip:e})})]})})]}):(0,r.jsx)(o,{...i}),"withAdvancedControlsBtnCollapse");(0,o.addFilter)("blocks.registerBlockType","ekilineLnkPopoverData/dataAttribute",function(e){return b.includes(e.name)&&(e.attributes=Object.assign(e.attributes,{addDataLnkPopover:{type:"string",default:""},addPositionLnkPopover:{type:"string",default:"auto"},defineTooltip:{type:"boolean",default:!1}})),e}),(0,o.addFilter)("editor.BlockEdit","ekilineLnkPopoverData/dataInput",k),(0,o.addFilter)("blocks.getSaveElement","ekilineLnkPopoverData/dataModified",function(e,t,o){if(!b.includes(t.name))return e;const{addDataLnkPopover:n,addPositionLnkPopover:i,defineTooltip:r,url:s,text:a}=o;return n&&s&&a?.text?(0,l.cloneElement)(e,{},(0,l.cloneElement)(e.props.children,{"data-bs-content":n,"data-bs-toggle":r?"tooltip":"popover","data-bs-placement":i,title:r?n:a.text})):e});const p=window.wp.data,m=["top","right","bottom","left"],h=e=>null!=e&&""!==e,C=e=>e.charAt(0).toUpperCase()+e.slice(1),g={color:"#f9f9f9",style:"solid",width:"1px"},f=".375rem",B=(e={},t=g)=>({color:h(e.color)?e.color:t.color,style:h(e.style)?e.style:t.style,width:h(e.width)?e.width:t.width}),v=e=>!!e&&"object"==typeof e&&m.some(t=>e?.[t]),_=(e,t=g)=>{if(!e||"object"!=typeof e)return{...t};if(v(e)){const o=m.reduce((o,l)=>{const n=e[l];return n?{...o,[l]:B(n,t)}:o},{});return Object.keys(o).length?o:{...t}}return B(e,t)},x=(e,t=g)=>{const o=B(e,t);return`${o.width} ${o.style} ${o.color}`},w=(e,t=g)=>{if(v(e)){const o=m.reduce((o,l)=>{const n=e[l];return n?{...o,[`border${C(l)}`]:x(n,t)}:o},{});return Object.keys(o).length?o:{border:x(t,t)}}return e?{border:x(e,t)}:{border:x(t,t)}},j=(e,t=!0,o=f)=>h(e)?e:t?void 0:o,y=(e,t=f)=>j(e,!1,t),P=({value:e,onChange:o,defaultBorder:l,withThemeColors:n=!0,colors:i,disableCustomColors:s,enableAlpha:a,...c})=>{const{themeColors:d,themeDisableCustomColors:u}=(0,p.useSelect)(e=>{if(!n)return{themeColors:void 0,themeDisableCustomColors:void 0};const t=e("core/block-editor").getSettings?.()||{};return{themeColors:t.colors||[],themeDisableCustomColors:t.disableCustomColors}},[n]),b=null!=i?i:d,k=void 0!==s?s:u,m=void 0!==a?a:!k,h=_(e,l);return(0,r.jsx)(t.BorderBoxControl,{value:h,onChange:e=>{if("function"!=typeof o)return;const t=_(e,l);o(t)},colors:b,disableCustomColors:k,enableAlpha:m,...c})},L=[{value:"px",label:"px",default:6},{value:"em",label:"em"},{value:"rem",label:"rem"},{value:"%",label:"%"}],E=({value:o,onChange:l,label:n=(0,e.__)("Border radius","ekiline-block-collection"),units:i=L,allowEmpty:s=!0,defaultRadius:a=f,...c})=>{const d={label:n,value:y(o,a),onChange:e=>{if("function"!=typeof l)return;const t=j(e,s,a);l(t)},units:i,...c};return void 0===d.isResetValueOnUnitChange&&(d.isResetValueOnUnitChange=!1),(0,r.jsx)(t.__experimentalUnitControl,{...d})},O=["ekiline-block-collection/ekiline-toast-item","ekiline-block-collection/ekiline-offcanvas","ekiline-block-collection/ekiline-modal","ekiline-block-collection/ekiline-modal-header","ekiline-block-collection/ekiline-modal-body","ekiline-block-collection/ekiline-modal-footer","ekiline-block-collection/ekiline-collapse","ekiline-block-collection/ekiline-progress","ekiline-block-collection/ekiline-progress-item"],A=e=>O.includes(e);(0,o.addFilter)("blocks.registerBlockType","ekiline/border-attributes",function(e,t){if(!A(t))return e;const o={...e};return o.attributes=o.attributes||{},o.attributes.border||(o.attributes.border={type:"object",default:{...g}}),o.attributes.borderRadius||(o.attributes.borderRadius={type:"string",default:f}),o.supports=o.supports||{},o.supports.border=o.supports.border||{color:!0,radius:!0,style:!0,width:!0},o});const D=(0,i.createHigherOrderComponent)(o=>l=>{const{name:i,attributes:s,setAttributes:a}=l;if(!A(i))return(0,r.jsx)(o,{...l});const{border:c,borderRadius:d}=s,u=_(c);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{...l}),(0,r.jsx)(n.InspectorControls,{group:"styles",children:(0,r.jsxs)(t.PanelBody,{title:(0,e.__)("Border","ekiline-block-collection"),initialOpen:!0,children:[(0,r.jsx)(P,{label:(0,e.__)("Border","ekiline-block-collection"),value:u,onChange:e=>{const t=_(e);JSON.stringify(t)!==JSON.stringify(c)&&a({border:t})},__experimentalIsRenderedInSidebar:!0}),(0,r.jsx)(E,{value:d,onChange:e=>{const t=j(e,!0,f);t!==d&&a({borderRadius:t})}})]})})]})},"withBorderControls");(0,o.addFilter)("editor.BlockEdit","ekiline/with-border-controls",D);const F=(0,i.createHigherOrderComponent)(e=>t=>{const{name:o,attributes:l,wrapperProps:n={}}=t;if(!A(o))return(0,r.jsx)(e,{...t});const{border:i,borderRadius:s}=l,a=_(i),c=w(a),d=y(s,f),u={...n,style:{...n.style||{},...c,borderRadius:d}};return(0,r.jsx)(e,{...t,wrapperProps:u})},"withBorderWrapperStyles");(0,o.addFilter)("editor.BlockListBlock","ekiline/with-border-wrapper-styles",F),(0,o.addFilter)("blocks.getSaveContent.extraProps","ekiline/border-save-props",function(e,t,o){if(!A(t.name))return e;const{border:l,borderRadius:n}=o,i=_(l),r=w(i),s=y(n,f);return{...e,style:{...e.style||{},...r,borderRadius:s}}})})();